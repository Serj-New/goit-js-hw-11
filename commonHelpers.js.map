{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["'use strict';\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nexport class ImagesAPI {\n  constructor() {\n    this.BASE_URL = 'https://pixabay.com/api/';\n    this.KEY = `?key=42244518-9742bcd26a7acdceb08ce98f6`;\n  }\n\n  getImages(userImgTag) {\n    this.PARAMS = `&q=${userImgTag}&image_type=photo&orientation=horizontal&safesearch=true`;\n    const url = this.BASE_URL + this.KEY + this.PARAMS;\n\n    return fetch(url)\n    .then(res => res.json())\n    .then(data => {\n      if (data.hits && data.hits.length > 0) {\n        return data.hits;\n      } else {\n        iziToast.error({\n          message: 'Sorry, there are no images matching your search query. Please try again!',\n          titleColor: 'white',\n          titleSize: '16px',\n          messageColor: 'white',\n          messageSize: '16px',\n          backgroundColor: '#ef4040',\n          iconUrl: '/img/error.svg',\n          iconColor: 'white',\n          position: 'topRight',\n          maxWidth: '432px',\n        });\n      }\n    })\n    .catch(error => {\n      console.error('Fetch error:', error);\n    });\n  }\n}","'use strict';\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst refs = {\n    imageElem: document.querySelector('.gallery'),\n};\n\nfunction templateImage({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) {\n    return  `\n    <li class=\"gallery-item\">\n        <a href=\"${largeImageURL}\">\n            <img src=\"${webformatURL}\" alt=\"${tags}\"\"/>\n            <div class=\"img-info\">\n                <p class=\"info-item\"><b>Likes:</b>${likes}</p>\n                <p class=\"info-item\"><b>Views:</b>${views}</p>\n                <p class=\"info-item\"><b>Comments:</b>${comments}</p>\n                <p class=\"info-item\"><b>Downloads:</b>${downloads}</p>\n            </div>\n        </a>\n    </li>\n    `;\n};\n\nfunction templateImages(images) {\n    return images.map(templateImage).join('');\n}\n\nexport default function renderImages(images) {\n    const markup = templateImages(images);\n    refs.imageElem.innerHTML = markup;\n\n    const gallery = new SimpleLightbox('.gallery a', {\n        captions: true,\n        captionDelay: 250,\n        captionsData: 'alt',\n      });\n    \n    gallery.refresh();\n}","'use strict';\n\nimport { ImagesAPI } from './js/pixabay-api';\nimport renderImages from './js/render-functions';\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst STORAGE_KEY = 'image-tag';\n\nconst refs = {\n    imgTagInput: document.querySelector('#search-img'),\n    searchBtn: document.querySelector('.form'),\n    loader: document.querySelector('.backdrop'),\n};\n\nrefs.imgTagInput.addEventListener('input', onFormInput);\nrefs.searchBtn.addEventListener('submit', onSearchImg);\n\nconst imagesAPI = new ImagesAPI();\n\nfunction onFormInput() {\n  const tag = refs.imgTagInput.value.trim();\n  \n  const data = {\n      tag,\n  };\n\n  saveToLS(STORAGE_KEY, data);\n}\n\nfunction onSearchImg(evt) {\n    evt.preventDefault();\n\n    const userImgTag = refs.imgTagInput.value.trim();\n\n    if (userImgTag === '') {\n        iziToast.error({\n        message: 'Please enter a search tag',\n        titleColor: 'white',\n        titleSize: '16px',\n        messageColor: 'white',\n        messageSize: '16px',\n        backgroundColor: '#ef4040',\n        iconUrl: '../img/error.svg',\n        iconColor: 'white',\n        position: 'topRight',\n        });\n    } else {\n        refs.loader.classList.add('is-open');\n        imagesAPI\n            .getImages(userImgTag)\n            .then(data => renderImages(data))\n            .catch(err => {\n                console.log(err)\n            })\n            .finally(() => {refs.loader.classList.remove('is-open');});\n    }\n\n    localStorage.removeItem(STORAGE_KEY);\n\n    refs.searchBtn.reset();\n}\n\nfunction saveToLS(key, value) {\n  const archive = JSON.stringify(value);\n  localStorage.setItem(key, archive);\n}\n\nfunction loadFromLS(key) {\n    const archive = localStorage.getItem(key);\n\n    try {\n        return JSON.parse(archive);\n    } catch (error) {\n        console.error('Error parsing JSON from localStorage:', error);\n        return {};\n    }\n}\n\nfunction init() {\n    const data = loadFromLS(STORAGE_KEY) || {};\n    refs.imgTagInput.value = data.tag || '';\n}\n\ninit();"],"names":["ImagesAPI","userImgTag","url","res","data","iziToast","error","refs","templateImage","webformatURL","largeImageURL","tags","likes","views","comments","downloads","templateImages","images","renderImages","markup","SimpleLightbox","STORAGE_KEY","onFormInput","onSearchImg","imagesAPI","saveToLS","evt","err","key","value","archive","loadFromLS","init"],"mappings":"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"}